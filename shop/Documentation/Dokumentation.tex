\documentclass[a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage{listings,lstautogobble}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{pdfpages}

\usepackage{caption}
\usepackage{subcaption}

\usepackage{float}

\usepackage[hidelinks]{hyperref}

\definecolor{pblue}{rgb}{0.13,0.13,1}
\definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.9,0,0}

\lstset{
	language=Java,
	basicstyle=\ttfamily,
	%basicstyle=\footnotesize,
	numbers=left,
	numberstyle=\footnotesize,
	numbersep=8pt,
	frame=single,
	framexleftmargin=15pt,
	xleftmargin=25pt,
	xrightmargin=10pt,
	aboveskip=10pt,
	belowskip=8pt,
	tabsize=4,
	showstringspaces=false,
	autogobble=true,
	showspaces=false,
	breaklines=true,
	showstringspaces=false,
	breakatwhitespace=true,
	commentstyle=\color{pgreen},
	keywordstyle=\color{pblue},
	stringstyle=\color{pred},
}

\renewcommand{\contentsname}{Inhalt}
\renewcommand{\baselinestretch}{1.25}
\renewcommand{\labelitemi}{$\vcenter{\hbox{\tiny$\bullet$}}$}
\renewcommand{\labelitemii}{$\Rightarrow$}

\graphicspath{{./Bilder/}}

\begin{document}
%\includepdf{Titelblatt}

\input{titlepage}

\newpage
\tableofcontents
\thispagestyle{empty}

\newpage
\section{Projektbeschreibung}
Unser Projekt haben wir stark an den Übungen orientiert und auf dem Ergebnis dieser aufgebaut. 
Die Datenbank wird durch hibernate in der Option hibernate.hbm2ddl.auto in der Produktion Version auf 'None' konfiguriert. In der Variante 'create' und 'create-drop' werden die Datenbankstabellen bei jedem Start des Programmes sonst neu erstellt.
Die Datenbank wird bei erstmaligem Start durch das Laden eines vorher erstellten dump file eingerichtet.
Da Tobias viel Erfahrung hat im Bereich Webentwicklung mit Java Enterprise Edition haben wir einige sinnvolle Erweiterungen einbauen können, die so nicht in den Übungen enthalten waren:
\begin{itemize}
	\item templates für den Seiteninhalt mit festem header und footer 
	\item loginHandler statt sessionHandler
	\item anderes primefaces theme
\end{itemize}
Durch die Verwendung von templates muss der Webserver bei Anklicken eines Links weniger Inhalt nachladen und die Geschwindigkeit und Antwortzeit wird durch die Reduzierung des Datenaustausches erhöht.
Der sessionHandler küm-mert sich neben dem login auch um den Warenkorb des Kunden und die Navigation. Darüber hinaus kann hier auch das dump file für die Datenbank geladen werden.
Mit einem geänderten primefaces theme wollen wir uns graphisch von anderen Projekten abheben.
\newline
Wir haben uns ebenfalls über die Sicherheit des Programmes Gedanken gemacht. Das Adminpasswort haben wir zu einem 16 Zeichen langen Passwort mit Sonderzeichen, Gross- und Kleinschreibung und Zahlen erweitert. Die Sicherheit der Datenbank vor SQL-Injection ist durch die mit annotations und hibernate erfolgte Einfügung in die Datenbank über prepared statements sichergestellt. Theoretisch dürften die in der Datenbank gespeicherten Passwörter nicht als plain text gespeichert werden, die Sicherheit wäre aber auch nicht viel besser durch das Speichern eines hashcodes (da diese heutzutage auch relativ einfach errechnet werden können), sondern bräuchte ein anderes System. Dies lohnt sich in unserem kleinen Studentenprojekt nicht.


\section{Anforderungsdefinition}
\subsection{Funktionale Anforderungen}
\paragraph{Konto erstellen}
Es muss möglich sein, als Kunde ein Konto zu erstellen. Dieses soll ab Erstellung die Möglichkeit bieten sich einzuloggen. Das soll von überall und immer möglich sein.
\paragraph{Einloggen}
Wenn ein Konto erstellt wurde, soll es möglich sein, sich in dieses einzuloggen. Dies soll einige Funktionen ermöglichen (siehe weitere Punkte).
\paragraph{Artikel betrachten}
Es soll für einen Benutzer der Seite möglich sein, die im Shop vorhandenen Artikel anzusehen. Dies soll immer erlaubt sein, unabhängig davon, ob er eingeloggt ist oder nicht.
\paragraph{Artikel bestellen}
Ein Kunde soll einen Artikel dem Warenkorb hinzufügen und diesen dann einzeln oder mit anderen zusammen bestellen. Dies soll nur möglich sein, wenn der Kunde schon ein Konto hat, in dem auch eine Zahlungs-möglichkeit hinterlegt wurde.
\paragraph{Sprache ändern}
Es muss möglich sein, die Sprache des Shops zu ändern. Dies soll von jeder Seite des Shops aus und unabhängig davon, ob er eingeloggt ist, machbar sein.
\paragraph{Kreditkarte hinzufügen / ändern}
Damit ein Benutzer bezahlen kann, muss er eine Bezahlmethode - in diesem Fall eine Kreditkarte - zu seinem Konto hinzufügen können. Außerdem müssen diese Daten geändert werden können, wenn der Benutzer eingeloggt ist.
\paragraph{Kontodaten hinzufügen / ändern}
Es muss möglich sein, die hinterlegten Daten zu einem Konto zu ändern. Dazu gehören \textcolor{red}{XXXXX} . Dies darf nur möglich sein, wenn der Benutzer eingeloggt ist.

\subsection{Nichtfunktionale Anforderungen}
\paragraph{Benutzbarkeit}
Das Programm sollte leicht und intuitiv benutzbar sein. Der Benutzer soll alle Funktionen des Webshops benutzen können, ohne darüber nachdenken zu müssen. Dabei soll es von Seiten des Webshops keine Unklarheiten oder Mehrdeutigkeiten geben. Es muss immer klar sein, wie der Benutzer sein Ziel erreichen kann.

\paragraph{Geschwindigkeit}
Damit der Webshop angenehm zu bedienen ist, muss sich dementsprechend schnell durch die Seiten bewegt werden können und Aktionen müssen in kürzester Zeit ausgeführt werden. Diese Antwortzeiten dürfen nicht so lange dauern, dass es dem Benutzer negativ auffällt.

\paragraph{Sicherheit}
Die Sicherheit ist vor allem wichtig um die Daten der Benutzer zu schützen. Dazu gehören die persönlichen Daten wie Name / Geschlecht / Adresse, aber auch die Bezahldaten wie hinterlegte Kreditkarten. Es muss also unmöglich sein, von außen an diese Daten zu gelangen. Außerdem darf der Webshop nicht durch Angriffe oder Fehler im System zum Absturz oder Fehlverhalten gebracht werden.

\section{Klassendiagramm des Modells}
\begin{figure}[H]
	\centering
	\includegraphics[width=\textwidth]{Klassendiagramm.png}
\end{figure}

\section{Use-Cases}
\subsection{Registrieren}
\begin{description}
	\item[Name:]\hfill \\
	Registrieren
	\item[Beschreibung:]\hfill \\ 
	Ein Kunde möchte einen Benutzeraccount anlegen, um den vollen Umfang der Seite (zum Beispiel Kaufvorgänge) nutzen zu können
	\item[Gewünschtes Ergebnis:]\hfill \\ 
	Der Kunde besitzt einen Account und wird in diesen eingeloggt
	\item[Beteiligte Personen:]\hfill \\ 
	Kunde
	\item[Bedeutung:]\hfill \\ 
	wichtig
	\item[Häufigkeit:]\hfill \\ 
	mittel
	\item[Vorbedingungen:]\hfill \\ 
	keine
	\item[Ereignisse:]\hfill
	\begin{itemize}
		\item Kunde klickt auf "Registrieren"
		\begin{itemize}
			\item Die Seite ruft das Formular zum Eintragen der Daten auf
		\end{itemize}
		\item Kunde trägt die erforderlichen (und evtl. die optionalen) Daten ein und klickt auf "Konto erstellen"
		\begin{itemize}
			\item Die Seite erstellt einen Account mit den eingegebenen Daten und loggt den Kunden ein
		\end{itemize}
	\end{itemize}
\end{description}

\subsection{Kreditkarte ändern}
\begin{description}
	\item[Name:]\hfill \\
	Kreditkarte ändern
	\item[Beschreibung:]\hfill \\ 
	Ein Kunde will die hinterlegten Daten seiner Kreditkarte ändern
	\item[Gewünschtes Ergebnis:]\hfill \\ 
	Die alten Daten sind weg, die neuen Daten sind gespeichert
	\item[Beteiligte Personen:]\hfill \\ 
	Kunde
	\item[Bedeutung:]\hfill \\ 
	wichtig
	\item[Häufigkeit:]\hfill \\ 
	selten
	\item[Vorbedingungen:]\hfill \\ 
	Der Kunde besitzt einen Account und es ist schon mindestens eine Kreditkarte im System hinterlegt
	\item[Ereignisse:]\hfill
	\begin{itemize}
		\item Kunde klickt auf "Login"
		\begin{itemize}
			\item Die Seite zeigt die Login-Abfrage an
		\end{itemize}
		\item Kunde gibt seinen Benutzernamen und Passwort ein und klickt auf "Login"
		\begin{itemize}
			\item Die Seite loggt den Kunden ein und zeigt die Startseite an
		\end{itemize}
		\item Kunde klickt auf "Profil bearbeiten"
		\begin{itemize}
			\item Die Seite zeigt die Übersichtsseite "Profil bearbeiten" an
		\end{itemize}
		\item Der Kunde klickt unter "Zahlungsarten" und "Kreditkarte" auf \\"Bearbeiten"
		\begin{itemize}
			\item Die Daten der Kreditkarte werden zur Veränderung freigegeben
		\end{itemize}
		\item Kunde ändert die gewünschten Daten und klickt auf "Speichern"
		\begin{itemize}
			\item Die Seite speichert die Änderungen und zeigt dies an
		\end{itemize}
	\end{itemize}
\end{description}

\subsection{Artikel in den Warenkorb legen}\begin{description}
	\item[Name:]\hfill \\
	Artikel in den Warenkorb legen
	\item[Beschreibung:]\hfill \\ 
	Ein Kunde möchte einen Artikel aus dem Shop aussuchen und ihn in den Warenkorb legen, um diesen dann kaufen
	\item[Gewünschtes Ergebnis:]\hfill \\ 
	Der Artikel soll gekauft werden
	\item[Beteiligte Personen:]\hfill \\ 
	Kunde
	\item[Bedeutung:]\hfill \\ 
	wichtig
	\item[Häufigkeit:]\hfill \\ 
	mittel
	\item[Vorbedingungen:]\hfill \\ 
	Der Kunde besitzt einen Account und hat eine Zahlungsart und eine Lieferadresse hinterlegt
	\item[Ereignisse:]\hfill
	\begin{itemize}
		\item Kunde klickt auf "Login"
		\begin{itemize}
			\item Die Seite zeigt die Login-Abfrage an
		\end{itemize}
		\item Kunde gibt seinen Benutzernamen und Passwort ein und klickt auf "Login"
		\begin{itemize}
			\item Die Seite loggt den Kunden ein und zeigt die Startseite an
		\end{itemize}
		\item Kunde klickt auf "Stöbern"
		\begin{itemize}
			\item Die Seite zeigt alle Produkte in einer mehrseitigen Liste an
		\end{itemize}
		\item Kunde sucht den gewünschten Artikel aus der Liste aus und drückt dort auf "Zum Warenkorb hinzufügen"
		\begin{itemize}
			\item Die Seite fügt den Artikel zum Warenkorb hinzu und zeigt dies an ("1 Artikel ausgewählt")
		\end{itemize}
		\item Kunde klickt auf "zum Warenkorb"
		\begin{itemize}
			\item Die Seite zeigt den Warenkorb mit dem Artikel an
		\end{itemize}
		\item Kunde klickt auf "Kaufabwicklung abschließen"
		\begin{itemize}
			\item Die Seite schließt den Kauf ab und zeigt dies an
		\end{itemize}
	\end{itemize}
\end{description}

\section{GUI-Screenshots}
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{KontoErstellen.png}
\caption{Konto erstellen}
\end{figure}
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{login.png}
\caption{Login}
\end{figure}
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{Willkommen.png}
\caption{Der Willkommen-Bildschirm}
\end{figure}
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{KontoBearbeiten.png}
\caption{Konto bearbeiten}
\end{figure}
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{shoppen.png}
\caption{Waren auswählen}
\end{figure}
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{Kaufabwicklung.png}
\caption{Kaufabwicklung}
\end{figure}

%\section*{Anhang}
%\addcontentsline{toc}{section}{Anhang}
%\begin{lstlisting}[breaklines, frame=none, xleftmargin=-10pt, xrightmargin=-10pt]
	
%\end{lstlisting}

\end{document}
